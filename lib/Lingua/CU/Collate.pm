package Lingua::CU::Collate;

require 5.006;
use strict;
use warnings;
use utf8;

require Exporter;
require Carp;

no warnings 'utf8';
use Unicode::Collate '1.04';

our @ISA = qw(Exporter Unicode::Collate);
our $VERSION = '1.04'; ## XXX: keep version alligned with version of Unicode::Collate

my %cu = (
   locale_version => 1.01,
# Church Slavic (cu) Collation rules for Church Slavic (Russia) locale
# Copyright 2015 Aleksandr Andreev and others
# Slavonic Computing Initiative :: http://www.ponomar.net/cu_support.html
# This code is FREE SOFTWARE and is licensed under the same terms as Perl itself
   upper_before_lower => 1,
   suppress => [0x0400, 0x040D, 0x0419, 0x0450, 0x045D, 0x0439, 0x0407, 0x0457],
   entry => <<'ENTRY', # for DUCET v6.3.0
0487      ; [.0000.0001.0000] # COMBINING CYRILLIC POKRYTIE
A67C      ; [.0000.0001.0000] # COMBINING CYRILLIC KAVYKA
A67E      ; [.0000.0001.0000] # CYRILLIC KAVYKA
0485      ; [.0000.0003.0000] # COMBINING CYRILLIC DASIA PNEUMATA
0486      ; [.0000.0005.0000] # COMBINING CYRILLIC PSILI PNEUMATA
0301      ; [.0000.0007.0000] # COMBINING ACUTE ACCENT
00E1      ; [.15EB.0020.0002][.0000.0007.0000] # LATIN SMALL LETTER A WITH ACUTE
00C1      ; [.15EB.0020.0008][.0000.0007.0000] # LATIN CAPITAL LETTER A WITH ACUTE
00E9      ; [.1648.0020.0002][.0000.0007.0000] # LATIN SMALL LETTER E WITH ACUTE
00C9      ; [.1648.0020.0008][.0000.0007.0000] # LATIN CAPITAL LETTER E WITH ACUTE
00ED      ; [.16C9.0020.0002][.0000.0007.0000] # LATIN SMALL LETTER I WITH ACUTE
00CD      ; [.16C9.0020.0008][.0000.0007.0000] # LATIN CAPITAL LETTER I WITH ACUTE
00F3      ; [.176D.0020.0002][.0000.0007.0000] # LATIN SMALL LETTER O WITH ACUTE
00D3      ; [.176D.0020.0008][.0000.0007.0000] # LATIN CAPITAL LETTER O WITH ACUTE
00FA      ; [.1832.0020.0002][.0000.0007.0000] # LATIN SMALL LETTER U WITH ACUTE
00DA      ; [.1832.0020.0008][.0000.0007.0000] # LATIN CAPITAL LETTER U WITH ACUTE
00FD      ; [.187C.0020.0002][.0000.0007.0000] # LATIN SMALL LETTER Y WITH ACUTE
00DD      ; [.187C.0020.0008][.0000.0007.0000] # LATIN CAPITAL LETTER Y WITH ACUTE
0300      ; [.0000.0009.0000] # COMBINING GRAVE ACCENT
0311      ; [.0000.000B.0000] # COMBINING INVERTED BREVE
0483      ; [.0000.000D.0000] # COMBINING CYRILLIC TITLO
0306      ; [.0000.000F.0000] # COMBINING BREVE
0308      ; [.0000.0011.0000] # COMBINING DIAERESIS
030F      ; [.0000.0011.0000] # COMBINING DOUBLE GRAVE ACCENT
003B      ; [.0000.0000.0000] # SEMICOLON
003A      ; [.0000.0000.0000] # COLON
005C      ; [.0000.0000.0000] # REVERSE SOLIDUS
002E      ; [.0000.0000.0000] # FULL STOP
002D      ; [.0000.0000.0000] # HYPHEN-MINUS
002C      ; [.0000.0000.0000] # COMMA
002A      ; [.0000.0000.0000] # ASTERISK
2013      ; [.0000.0000.0000] # EN DASH
2014      ; [.0000.0000.0000] # EM DASH
005F      ; [.0000.0000.0000] # LOW LINE
A673      ; [.0000.0000.0000] # SLAVONIC ASTERISK
0482      ; [.0000.0000.0000] # CYRILLIC THOUSANDS SIGN
20DD      ; [.0000.0000.0000] # COMBINING ENCLOSING CIRCLE
0488      ; [.0000.0000.0000] # COMBINING CYRILLIC HUNDRED THOUSANDS SIGN
0489      ; [.0000.0000.0000] # COMBINING CYRILLIC MILLIONS SIGN
A670      ; [.0000.0000.0000] # COMBINING CYRILLIC TEN MILLIONS SIGN
A671      ; [.0000.0000.0000] # COMBINING CYRILLIC HUNDRED MILLIONS SIGN
A672      ; [.0000.0000.0000] # COMBINING CYRILLIC THOUSAND MILLIONS SIGN
2720      ; [.0000.0000.0000] # MALTESE CROSS
1C81      ; [.19C1.0020.0002] # <unknown>
0454      ; [.19D5.003E.0002] # CYRILLIC SMALL LETTER UKRAINIAN IE
0404      ; [.19D5.003E.0008] # CYRILLIC CAPITAL LETTER UKRAINIAN IE
0455      ; [.19E3.0020.0002] # CYRILLIC SMALL LETTER DZE
0405      ; [.19E3.0020.0008] # CYRILLIC CAPITAL LETTER DZE
0437      ; [.19E5.0020.0002] # CYRILLIC SMALL LETTER ZE
A641      ; [.19E5.0020.0002] # CYRILLIC SMALL LETTER ZEMLYA
0417      ; [.19E5.0020.0008] # CYRILLIC CAPITAL LETTER ZE
A640      ; [.19E5.0020.0008] # CYRILLIC CAPITAL LETTER ZEMLYA
0456      ; [.1A08.0020.0002] # CYRILLIC SMALL LETTER BYELORUSSIAN-UKRAINIAN I
0406      ; [.1A08.0020.0008] # CYRILLIC CAPITAL LETTER BYELORUSSIAN-UKRAINIAN I
0439      ; [.1A06.0020.0002][.0000.000F.0000] # CYRILLIC SMALL LETTER SHORT I
0419      ; [.1A06.0020.0008][.0000.000F.0000] # CYRILLIC CAPITAL LETTER SHORT I
0438 0306 ; [.1A06.0020.0002][.0000.000F.0000] # CYRILLIC SMALL LETTER SHORT I
0418 0306 ; [.1A06.0020.0008][.0000.000F.0000] # CYRILLIC CAPITAL LETTER SHORT I
0456 0308 ; [.1A08.0020.0002][.0000.0011.0000] # CYRILLIC SMALL LETTER YI
0406 0308 ; [.1A08.0020.0008][.0000.0011.0000] # CYRILLIC CAPITAL LETTER YI
0457      ; [.1A08.0020.0002][.0000.0011.0000] # CYRILLIC SMALL LETTER YI
0407      ; [.1A08.0020.0008][.0000.0011.0000] # CYRILLIC CAPITAL LETTER YI
047B      ; [.1A5B.0020.0002] # CYRILLIC SMALL LETTER ROUND OMEGA
047A      ; [.1A5B.0020.0008] # CYRILLIC CAPITAL LETTER ROUND OMEGA
043E      ; [.1A5B.003E.0002] # CYRILLIC SMALL LETTER O
041E      ; [.1A5B.003E.0008] # CYRILLIC CAPITAL LETTER O
1C82      ; [.1A5B.003E.0002] # <unknown>
0461      ; [.1A5B.005C.0002] # CYRILLIC SMALL LETTER OMEGA
0460      ; [.1A5B.005C.0008] # CYRILLIC CAPITAL LETTER OMEGA
A64D      ; [.1A5B.007A.0002] # CYRILLIC SMALL LETTER BROAD OMEGA
A64C      ; [.1A5B.007A.0008] # CYRILLIC CAPITAL LETTER BROAD OMEGA
047C      ; [.1A5B.007A.0008][.0000.0005.0000][.0000.000B.0000] # CYRILLIC CAPITAL LETTER OMEGA WITH TITLO
047D      ; [.1A5B.007A.0002][.0000.0005.0000][.0000.000B.0000] # CYRILLIC SMALL LETTER OMEGA WITH TITLO
047E      ; [.1A5B.005C.0008][.1AA2.0020.0002] # CYRILLIC CAPITAL LETTER OT
047F      ; [.1A5B.005C.0002][.1AA2.0020.0002] # CYRILLIC SMALL LETTER OT
0479      ; [.1AA4.0020.0002] # CYRILLIC SMALL LETTER UK
0478      ; [.1AA4.0020.0008] # CYRILLIC CAPITAL LETTER UK
043E 0443 ; [.1AA4.0020.0002] # <CYRILLIC SMALL LETTER O, CYRILLIC SMALL LETTER U>
1C82 0443 ; [.1AA4.0020.0002] # <unknown, CYRILLIC SMALL LETTER U>
041E 0443 ; [.1AA4.0020.0008] # <CYRILLIC CAPITAL LETTER O, CYRILLIC SMALL LETTER U>
041E 0423 ; [.1AA4.0020.0008] # <CYRILLIC CAPITAL LETTER O, CYRILLIC CAPITAL LETTER U>
A64B      ; [.1AA4.003E.0002] # CYRILLIC SMALL LETTER MONOGRAPH UK
A64A      ; [.1AA4.003E.0008] # CYRILLIC CAPITAL LETTER MONOGRAPH UK
0443      ; [.1AA4.005C.0002] # CYRILLIC SMALL LETTER U
0423      ; [.1AA4.005C.0008] # CYRILLIC CAPITAL LETTER U
0463      ; [.1B52.0020.0002] # CYRILLIC SMALL LETTER YAT
0462      ; [.1B52.0020.0008] # CYRILLIC CAPITAL LETTER YAT
A657      ; [.1B60.0020.0002] # CYRILLIC SMALL LETTER IOTIFIED A
A656      ; [.1B60.0020.0008] # CYRILLIC CAPITAL LETTER IOTIFIED A
0467      ; [.1B60.003E.0002] # CYRILLIC SMALL LETTER LITTLE YUS
0466      ; [.1B60.003E.0008] # CYRILLIC CAPITAL LETTER LITTLE YUS
046B      ; [.1B62.0020.0002] # CYRILLIC SMALL LETTER BIG YUS
046A      ; [.1B62.0020.0008] # CYRILLIC CAPITAL LETTER BIG YUS
046F      ; [.1B64.0020.0002] # CYRILLIC SMALL LETTER KSI
046E      ; [.1B64.0020.0008] # CYRILLIC CAPITAL LETTER KSI
0471      ; [.1B66.0020.0002] # CYRILLIC SMALL LETTER PSI
0470      ; [.1B66.0020.0008] # CYRILLIC CAPITAL LETTER PSI
0473      ; [.1B68.0020.0002] # CYRILLIC SMALL LETTER FITA
0472      ; [.1B68.0020.0008] # CYRILLIC CAPITAL LETTER FITA
0475      ; [.1B6A.0020.0002] # CYRILLIC SMALL LETTER IZHITSA
0474      ; [.1B6A.0020.0008] # CYRILLIC CAPITAL LETTER IZHITSA
0476      ; [.1B6A.0020.0008][.0000.0011.0000] # CYRILLIC CAPITAL LETTER IZHITSA WITH DOUBLE GRAVE ACCENT
0477      ; [.1B6A.0020.0002][.0000.0011.0000] # CYRILLIC SMALL LETTER IZHITSA WITH DOUBLE GRAVE ACCENT
1F541     ; [*1377.0020.0002] # CROSS POMMEE WITH HALF-CIRCLE BELOW
1F542     ; [*1379.0020.0002] # CROSS POMMEE
1F543     ; [*137B.0020.0002] # NOTCHED LEFT SEMICIRCLE WITH THREE DOTS
1F544     ; [*137D.0020.0002] # <unknown>
0400      ; [.19D5.0020.0008][.0000.0009.0000] # CYRILLIC CAPITAL LETTER IE WITH GRAVE
040D      ; [.1A06.0020.0008][.0000.0009.0000] # CYRILLIC CAPITAL LETTER I WITH GRAVE
0450      ; [.19D5.0020.0002][.0000.0009.0000] # CYRILLIC SMALL LETTER IE WITH GRAVE
045D      ; [.1A06.0020.0002][.0000.0009.0000] # CYRILLIC SMALL LETTER I WITH GRAVE
2DF6      ; [.198D.0020.000A] # COMBINING CYRILLIC LETTER A
2DE0      ; [.19A5.0020.000A] # COMBINING CYRILLIC LETTER BE
2DE1      ; [.19A9.0020.000A] # COMBINING CYRILLIC LETTER VE
2DE2      ; [.19AD.0020.000A] # COMBINING CYRILLIC LETTER GHE
2DE3      ; [.19C1.0020.000A] # COMBINING CYRILLIC LETTER DE
2DF7      ; [.19D5.0020.000A] # COMBINING CYRILLIC LETTER IE
A674      ; [.19D5.003E.000A] # COMBINING CYRILLIC LETTER UKRAINIAN IE
2DE4      ; [.19E1.0020.000A] # COMBINING CYRILLIC LETTER ZHE
2DE5      ; [.19E5.0020.000A] # COMBINING CYRILLIC LETTER ZE
A675      ; [.1A06.0020.000A] # COMBINING CYRILLIC LETTER I
A676      ; [.1A08.0020.000A] # COMBINING CYRILLIC LETTER YI
2DE6      ; [.1A24.0020.000A] # COMBINING CYRILLIC LETTER KA
2DE7      ; [.1A3E.0020.000A] # COMBINING CYRILLIC LETTER EL
2DE8      ; [.1A50.0020.000A] # COMBINING CYRILLIC LETTER EM
2DE9      ; [.1A59.0020.000A] # COMBINING CYRILLIC LETTER EN
2DEA      ; [.1A5B.003E.000A] # COMBINING CYRILLIC LETTER O
A669      ; [.1A5B.003E.000A] # CYRILLIC SMALL LETTER MONOCULAR O
A66B      ; [.1A5B.003E.000A] # CYRILLIC SMALL LETTER BINOCULAR O
A66D      ; [.1A5B.003E.000A] # CYRILLIC SMALL LETTER DOUBLE MONOCULAR O
A66E      ; [.1A5B.003E.000A] # CYRILLIC LETTER MULTIOCULAR O
A67B      ; [.1A5B.005C.000A] # COMBINING CYRILLIC LETTER OMEGA
2DEB      ; [.1A83.0020.000A] # COMBINING CYRILLIC LETTER PE
2DEC      ; [.1A90.0020.000A] # COMBINING CYRILLIC LETTER ER
2DED      ; [.1A99.0020.000A] # COMBINING CYRILLIC LETTER ES
2DEE      ; [.1AA2.0020.000A] # COMBINING CYRILLIC LETTER TE
2DF5      ; [.1A99.0020.000A][.1AA2.0020.000A] # COMBINING CYRILLIC LETTER ES-TE
2DF9      ; [.1AA4.003E.000A] # COMBINING CYRILLIC LETTER MONOGRAPH UK
A677      ; [.1AA4.005C.000A] # COMBINING CYRILLIC LETTER U
A69E      ; [.1AD2.0020.000A] # <unknown>
2DEF      ; [.1AD6.0020.000A] # COMBINING CYRILLIC LETTER HA
2DF0      ; [.1AFD.0020.000A] # COMBINING CYRILLIC LETTER TSE
2DF1      ; [.1B08.0020.000A] # COMBINING CYRILLIC LETTER CHE
2DF2      ; [.1B2A.0020.000A] # COMBINING CYRILLIC LETTER SHA
2DF3      ; [.1B2F.0020.000A] # COMBINING CYRILLIC LETTER SHCHA
033E      ; [.1B36.0020.000A] # COMBINING VERTICAL TILDE
A678      ; [.1B36.0020.000A] # COMBINING CYRILLIC LETTER HARD SIGN
2E2F      ; [.1B36.0020.000A] # VERTICAL TILDE
A679      ; [.1B3B.0020.000A] # COMBINING CYRILLIC LETTER YERU
A67F      ; [.1B43.0020.000A] # CYRILLIC PAYEROK
A67D      ; [.1B43.0020.000A] # COMBINING CYRILLIC PAYEROK
A67A      ; [.1B43.0020.000A] # COMBINING CYRILLIC LETTER SOFT SIGN
2DFA      ; [.1B52.0020.000A] # COMBINING CYRILLIC LETTER YAT
2DFB      ; [.1B58.0020.000A] # COMBINING CYRILLIC LETTER YU
2DFC      ; [.1B60.0020.000A] # COMBINING CYRILLIC LETTER IOTIFIED A
2DFD      ; [.1B60.003E.000A] # COMBINING CYRILLIC LETTER LITTLE YUS
2DFE      ; [.1B62.0020.000A] # COMBINING CYRILLIC LETTER BIG YUS
2DF4      ; [.1B68.0020.000A] # COMBINING CYRILLIC LETTER FITA
0431 0446 2DE3 ; [.19A5.0020.0002][.19C1.0020.000A][.1AFD.0020.0002] # <CYRILLIC SMALL LETTER BE, CYRILLIC SMALL LETTER TSE, COMBINING CYRILLIC LETTER DE>
0411 0446 2DE3 ; [.19A5.0020.0008][.19C1.0020.000A][.1AFD.0020.0002] # <CYRILLIC CAPITAL LETTER BE, CYRILLIC SMALL LETTER TSE, COMBINING CYRILLIC LETTER DE>
0431 0447 2DE3 ; [.19A5.0020.0002][.19C1.0020.000A][.1B08.0020.0002] # <CYRILLIC SMALL LETTER BE, CYRILLIC SMALL LETTER CHE, COMBINING CYRILLIC LETTER DE>
0411 0447 2DE3 ; [.19A5.0020.0008][.19C1.0020.000A][.1B08.0020.0002] # <CYRILLIC CAPITAL LETTER BE, CYRILLIC SMALL LETTER CHE, COMBINING CYRILLIC LETTER DE>
043C 0440 2DE3 ; [.1A50.0020.0002][.19C1.0020.000A][.1A90.0020.0002] # <CYRILLIC SMALL LETTER EM, CYRILLIC SMALL LETTER ER, COMBINING CYRILLIC LETTER DE>
041C 0440 2DE3 ; [.1A50.0020.0008][.19C1.0020.000A][.1A90.0020.0002] # <CYRILLIC CAPITAL LETTER EM, CYRILLIC SMALL LETTER ER, COMBINING CYRILLIC LETTER DE>
043D 043B 2DE3 ; [.1A59.0020.0002][.19C1.0020.000A][.1A3E.0020.0002] # <CYRILLIC SMALL LETTER EN, CYRILLIC SMALL LETTER EL, COMBINING CYRILLIC LETTER DE>
041D 043B 2DE3 ; [.1A59.0020.0008][.19C1.0020.000A][.1A3E.0020.0002] # <CYRILLIC CAPITAL LETTER EN, CYRILLIC SMALL LETTER EL, COMBINING CYRILLIC LETTER DE>
0440 0442 2DE3 ; [.1A90.0020.0002][.19C1.0020.000A][.1AA2.0020.0002] # <CYRILLIC SMALL LETTER ER, CYRILLIC SMALL LETTER TE, COMBINING CYRILLIC LETTER DE>
0420 0442 2DE3 ; [.1A90.0020.0008][.19C1.0020.000A][.1AA2.0020.0002] # <CYRILLIC CAPITAL LETTER ER, CYRILLIC SMALL LETTER TE, COMBINING CYRILLIC LETTER DE>
0433 0434 2DED ; [.19AD.0020.0002][.1A99.0020.000A][.19C1.0020.0002] # <CYRILLIC SMALL LETTER GHE, CYRILLIC SMALL LETTER DE, COMBINING CYRILLIC LETTER ES>
0413 0434 2DED ; [.19AD.0020.0008][.1A99.0020.000A][.19C1.0020.0002] # <CYRILLIC CAPITAL LETTER GHE, CYRILLIC SMALL LETTER DE, COMBINING CYRILLIC LETTER ES>
0433 043F 2DED ; [.19AD.0020.0002][.1A99.0020.000A][.1A83.0020.0002] # <CYRILLIC SMALL LETTER GHE, CYRILLIC SMALL LETTER PE, COMBINING CYRILLIC LETTER ES>
0413 043F 2DED ; [.19AD.0020.0008][.1A99.0020.000A][.1A83.0020.0002] # <CYRILLIC CAPITAL LETTER GHE, CYRILLIC SMALL LETTER PE, COMBINING CYRILLIC LETTER ES>
043C 0442 2DED ; [.1A50.0020.0002][.1A99.0020.000A][.1AA2.0020.0002] # <CYRILLIC SMALL LETTER EM, CYRILLIC SMALL LETTER TE, COMBINING CYRILLIC LETTER ES>
041C 0442 2DED ; [.1A50.0020.0008][.1A99.0020.000A][.1AA2.0020.0002] # <CYRILLIC CAPITAL LETTER EM, CYRILLIC SMALL LETTER TE, COMBINING CYRILLIC LETTER ES>
043C 0447 2DED ; [.1A50.0020.0002][.1A99.0020.000A][.1B08.0020.0002] # <CYRILLIC SMALL LETTER EM, CYRILLIC SMALL LETTER CHE, COMBINING CYRILLIC LETTER ES>
041C 0447 2DED ; [.1A50.0020.0008][.1A99.0020.000A][.1B08.0020.0002] # <CYRILLIC CAPITAL LETTER EM, CYRILLIC SMALL LETTER CHE, COMBINING CYRILLIC LETTER ES>
0447 0442 2DED ; [.1B08.0020.0002][.1A99.0020.000A][.1AA2.0020.0002] # <CYRILLIC SMALL LETTER CHE, CYRILLIC SMALL LETTER TE, COMBINING CYRILLIC LETTER ES>
0427 0442 2DED ; [.1B08.0020.0008][.1A99.0020.000A][.1AA2.0020.0002] # <CYRILLIC CAPITAL LETTER CHE, CYRILLIC SMALL LETTER TE, COMBINING CYRILLIC LETTER ES>
ENTRY
);

sub new {
	my $class = shift;
	my %tailoring = @_;

	while (my ($k, $v) = each %cu) {
		if (!exists $tailoring{$k}) {
			$tailoring{$k} = $v;
		} elsif ($k eq "entry") {
			$tailoring{$k} = $v . $tailoring{$k};
		} else {
			Carp::croak (__PACKAGE__ . "::new - Error: $k is reserved and cannot be overwritten");
		}
	}

	return new Unicode::Collate(%tailoring);
}

1;

=pod

=encoding utf8

=head1 NAME

Lingua::CU::Collate - Collation for Church Slavonic in Unicode

=head1 SYNOPSIS

  use Lingua::CU::Collate;
 #construct
 $Collator = Lingua::CU::Collate->new(); # custom %tailoring may also be specified
 
 #sort
 @sorted = $Collator->sort(@not_sorted);
 
 #compare
 $result = $Collator->cmp($a, $b); # returns 1, 0, or -1.

=head1 DESCRIPTION

Lingua::CU::Collate is a wrapper around Unicode::Collate that provides a custom collation tailoring for Church Slavonic

All text supplied to this library must be encoded in UTF-8 and, unless otherwise specified, is assumed to be
in Unicode. For more on Church Slavonic using Unicode, and for a description of the tailoring, please see the paper
I<Roadmap for Church Slavonic Typography in the Unicode Standard> available at 
http://www.ponomar.net/.

This program is ALPHA STAGE SOFTWARE and is provided with ABSOLUTELY NO WARRANTY of any kind,
express or implied, not even the implied warranties of merchantability, fitness for a purpose, or non-infringement.

=head2 EXPORT

This module provides no methods except for new. It only serves as a wrapper around Unicode::Collate.

=head1 METHODS

=head2 new

Usage: C<new( %tailoring )>

Creates a new Unicode::Collate object. The same keys in C<tailoring> may be specified as would be specified in creating Unicode::Collate directly
however the following are reserved by Lingua::CU::Collate and may not be overwritten: C<suppress>, C<locale_version> 
and C<upper_before_lower>. If C<entry> is specified, it is appended to the entries specified by Lingua::CU::Collate.

=head1 SEE ALSO

This software is part of the Ponomar Project (see http://www.ponomar.net/â€‹).

Be sure to read the I<Roadmap for Church Slavonic Typography in the Unicode Standard> and to download the 
Unicode-compatible Hirmos Ponomar font.

Be sure to read as well C<perluniintro> and C<perllocale> in the Perl manual.

=head1 AUTHOR

Aleksandr Andreev <aleksandr.andreev@gmail.com>

=head1 COPYRIGHT AND LICENSE

Copyright (C) 2012-2014 by Aleksandr Andreev

This library is free software; you can redistribute it and/or modify
it under the same terms as Perl itself, either Perl version 5.14.2 or,
at your option, any later version of Perl you may have available.

=cut

